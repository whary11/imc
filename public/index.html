<!DOCTYPE html>
<html lang="es" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Calcular IMC</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
  </head>
  <body>
    <!--
    Colores
    Color1:
    Color2:
    Color3:

   -->
   <div id="app">
     <!-- Hacer loguin -->
     <!-- <div v-if="!login">
       Hacer Loguin en esta parte
     </div>
     Mostrar a los unisarios iniciados
     <div>
   -->
       <h1 class="center-align">Calcular IMC <i style="color:#09C284"class="fas fa-dumbbell"></i></h1>
       <!-- Subir Archivo -->
       <div class="container">
         <div class="row">
           <form class="col s6 offset-s3 card">
             <div class="file-field input-field">
               <div class="btn">
                 <span>Subir excel</span>
                 <input type="file" id="excel" @change="getExcel" accept=".xlsx">
               </div>
               <div class="file-path-wrapper">
                 <input class="file-path validate" type="text" placeholder="Datos a calcular">
               </div>
             </div>
             <!-- <button type="submit" name="button">Subir</button> -->
           </form>
         </div>
       </div>

       <!-- Tabla de datos  -->
       <div class="container" v-if="datos">
         <table class="animated wobble">
           <thead>
             <tr>
               <th>#</th>
               <th>Nombre</th>
               <th>Apellido</th>
               <th>Peso</th>
               <th>Talla</th>
               <th>IMC</th>
               <th>Pso para la Talla</th>
             </tr>
           </thead>

           <tbody>
             <tr v-for="(dato, index) in datos">
               <td>{{index +1}}</td>
               <td>{{dato.Nombre}}</td>
               <td>{{dato.Apellidos}}</td>
               <td>{{dato.peso}}</td>
               <td>{{dato.talla}}</td>
               <td>{{trunc(dato.peso/(dato.talla*dato.talla))}}</td>

  <!--
    Menor a 18	 Peso bajo. Necesario valorar signos de desnutrición
    18 a 24.9	 Normal
    25 a 26.9	 Sobrepeso
    Mayor a 27	 Obesidad
    27 a 29.9	 Obesidad grado I. Riesgo relativo alto para desarrollar enfermedades cardiovasculares
    30 a 39.9	 Obesidad grado II. Riesgo relativo muy alto para el desarrollo de enfermedades cardiovasculares
    Mayor a 40	 Obesidad grado III Extrema o Mórbida. Riesgo relativo extremadamente alto para el desarrollo de enfermedades cardiovasculares
   -->

   <!-- Probar el condicional con más datos. -->

               <td v-if="dato.peso/(dato.talla*dato.talla) < 18" class="red-text text-darken-2">Peso bajo. Necesario valorar signos de desnutrición</td>
               <td v-else-if="dato.peso/(dato.talla*dato.talla) > 40" class="red-text">Obesidad grado III Extrema o Mórbida. Riesgo relativo extremadamente alto para el desarrollo de enfermedades cardiovasculares</td>
               <td v-else-if="dato.peso/(dato.talla*dato.talla) >= 30" class="red-text text-darken-1">Obesidad grado II. Riesgo relativo muy alto para el desarrollo de enfermedades cardiovasculares</td>
               <td v-else-if="dato.peso/(dato.talla*dato.talla) > 27" class="red-text text-darken-2">Obesidad grado I. Riesgo relativo alto para desarrollar enfermedades cardiovasculares</td>
               <td v-else-if="dato.peso/(dato.talla*dato.talla) >= 25" class="red-text text-darken-3">Sobrepeso</td>
               <td v-else-if="dato.peso/(dato.talla*dato.talla) == 27" class="red-text text-darken-4">Obesidad</td>
               <td v-else-if="dato.peso/(dato.talla*dato.talla) >= 18" class="teal-text text-darken-2">Normal</td>

             </tr>
           </tbody>
         </table>
       </div>
     <a href="login.html">Loguin</a>
   <!-- </div>
     <pre>{{$data}}</pre>
   </div> -->
   <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyCBmTdh3gfy4SRrNxDXOmV53rpk43NtQ90",
        authDomain: "enredes-f8244.firebaseapp.com",
        databaseURL: "https://enredes-f8244.firebaseio.com",
        projectId: "enredes-f8244",
        storageBucket: "enredes-f8244.appspot.com",
        messagingSenderId: "870210169558"
      };
      firebase.initializeApp(config);
    </script>

    <!-- Librería Excel -->
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <!-- Vue.JS -->
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>
    <!-- index -->
    <script type="text/javascript" src="js/index.js"></script>
  </body>
</html>

<!--
  referencias: https://github.com/SheetJS/js-xlsx
  referencias: https://gist.github.com/theredstapler/5ce6a43b066dbe0cac3fa5587835be91
  -->
